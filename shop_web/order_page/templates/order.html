{% extends "base.html" %}

{% block title %}Umart{% endblock %}

{% block content %}
{{ error_message }}
<form action="." method="post">
    {{ form.as_p }}
    {% csrf_token %}
    <input type="submit" value="+">
</form>

<div>商品列表</div>
<table>
    <thead>
        <tr>
            <th>product_id</th>
            <th>stock_pcs</th>
            <th>price</th>
            <th>shop_id</th>
            <th>vip</th>
        </tr>
    </thead>
    <tbody>
        {% for this_product in product_list %}
        <tr>
            <td>{{ this_product.product_id }}</td>
            <td>{{ this_product.stock_pcs }}</td>
            <td>{{ this_product.price }}</td>
            <td>{{ this_product.shop_id }}</td>
            <td>{{ this_product.vip }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
<div>訂單紀錄</div>
<table>
    <thead>
        <tr>
            <th>Order ID</th>
            <th>product_id</th>
            <th>qty</th>
            <th>price</th>
            <th>shop_id</th>
            <th>Customer ID</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        {% for this_order in order_list %}
        <tr>
            <td>{{ this_order.id }}</td>
            <td>{{ this_order.product_id }}</td>
            <td>{{ this_order.qty }}</td>
            <td>{{ this_order.product.price }}</td>
            <td>{{ this_order.product.shop_id }}</td>
            <td>{{ this_order.customer_id }}</td>
            <td>
                <form method="post">
                    {% csrf_token %}
                    <input type="hidden" name="_method" value="delete">
                    <input type="hidden" id="order_id" name="order_id" value={{ this_order.id }}>
                    <input type="submit" value="-">
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
<div>Top3</div>
<table>
    {% for this_id in top_sell_id_list %}
    <tr>
        <td>第{{ forloop.counter }}名的銷售產品id: </td>
        <td>{{ this_id }}</td>
    </tr>
    {% endfor %}
</table>
{% endblock %}